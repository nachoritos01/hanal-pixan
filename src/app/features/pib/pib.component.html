<main class="pt-16 min-h-screen">
  <div class="mx-auto max-w-6xl px-6 py-12">
    
    <!-- Header -->
    <header class="text-center mb-12">
      <h1 class="text-4xl font-bold mb-4">
        Receta del <span class="text-accent-light">Pib Familiar</span>
      </h1>
      <p class="text-secondary max-w-2xl mx-auto">
        El mucbipollo es el coraz√≥n de Hanal Pix√°n. Aprende a preparar esta delicia tradicional yucateca paso a paso.
      </p>
    </header>

    <!-- Recipe Calculator -->
    <section class="mb-12">
      <app-card variant="accent" customClasses="max-w-md mx-auto">
        <h3 class="font-semibold mb-4">Calculadora de porciones</h3>
        <form [formGroup]="portionsForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">N√∫mero de personas</label>
            <input 
              type="number" 
              formControlName="portions"
              min="2" 
              max="20"
              class="w-full px-3 py-2 rounded-lg bg-card border border text-inverse placeholder-muted focus:border-accent focus:outline-none"
              placeholder="8"
            />
          </div>
          <div class="text-center">
            <p class="text-accent-light font-medium">
              Porciones calculadas: {{ calculatedPortions() }}
            </p>
          </div>
        </form>
      </app-card>
    </section>

    <!-- Ingredients -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6">Ingredientes</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-semibold mb-4 text-accent-light">Para la masa</h3>
          <div class="space-y-2">
            @for (ingredient of massaIngredients(); track ingredient.name) {
              <div class="flex justify-between items-center py-2 px-3 rounded-lg bg-card">
                <span [class.font-semibold]="ingredient.essential">{{ ingredient.name }}</span>
                <span class="text-accent">{{ ingredient.amount }} {{ ingredient.unit }}</span>
              </div>
            }
          </div>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-4 text-accent-light">Para el guiso</h3>
          <div class="space-y-2">
            @for (ingredient of fillingIngredients(); track ingredient.name) {
              <div class="flex justify-between items-center py-2 px-3 rounded-lg bg-card">
                <span [class.font-semibold]="ingredient.essential">{{ ingredient.name }}</span>
                <span class="text-accent">{{ ingredient.amount }} {{ ingredient.unit }}</span>
              </div>
            }
          </div>
        </div>
      </div>
    </section>

    <!-- Steps -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6">Preparaci√≥n</h2>
      <div class="space-y-6">
        @for (step of recipeSteps(); track step.title; let i = $index) {
          <app-card variant="default">
            <div class="flex gap-4">
              <div class="flex-shrink-0">
                <div class="w-8 h-8 rounded-full bg-accent text-black flex items-center justify-center font-bold text-sm">
                  {{ i + 1 }}
                </div>
              </div>
              <div class="flex-1">
                <h3 class="font-semibold mb-2">{{ step.title }}</h3>
                @if (step.duration) {
                  <p class="text-xs text-accent-light mb-2">‚è±Ô∏è {{ step.duration }}</p>
                }
                <p class="text-secondary mb-2">{{ step.description }}</p>
                @if (step.tips) {
                  <div class="mt-3 p-3 bg-cenote/10 rounded-lg border-l-4 border-cenote">
                    <p class="text-sm text-cenote">üí° <strong>Tip:</strong> {{ step.tips }}</p>
                  </div>
                }
              </div>
            </div>
          </app-card>
        }
      </div>
    </section>

    <!-- Traditional Notes -->
    <section class="mb-12">
      <app-card variant="glass">
        <h2 class="text-xl font-bold mb-4 text-accent-light">Notas Tradicionales</h2>
        <div class="space-y-4 text-secondary">
          <p>
            El <strong>pib</strong> (que significa "horno bajo tierra" en maya) es m√°s que una t√©cnica de cocci√≥n: 
            es un ritual que conecta a las familias con sus ancestros y la madre tierra.
          </p>
          <p>
            Tradicionalmente, el pib se prepara durante Hanal Pix√°n para alimentar tanto a los vivos como a las √°nimas 
            que regresan a visitar. Cada familia tiene sus propios secretos y variaciones transmitidos de generaci√≥n en generaci√≥n.
          </p>
          <p>
            <strong>Variaciones regionales:</strong> En Campeche suele llevar m√°s √©pazote, 
            en Quintana Roo a veces se agrega achiote extra, y en algunas comunidades de Yucat√°n 
            incluyen chile habanero para los m√°s valientes.
          </p>
        </div>
      </app-card>
    </section>

  </div>
</main>